events {}

http {
    server {
        listen 8080;

        root /usr/share/nginx/html;
        index index.html;

        location / {
            try_files $uri $uri/ /index.html;

            # IMPORTANT: Remove or comment out X-Frame-Options to avoid conflicts
            # with Content-Security-Policy's frame-ancestors.
            # remove_header X-Frame-Options; # This is if it's implicitly added by nginx, often not needed
            # add_header X-Frame-Options "ALLOWALL" always; # REMOVE OR COMMENT THIS LINE

            # Crucial: Allow embedding from Google Sites.
            # 'self' allows embedding from your own domain.
            # https://sites.google.com is the primary host for Google Sites.
            # *.google.com might be too broad; sites.google.com is usually sufficient.
            # Let's try to be very specific and ensure it's the last header of its type.
            add_header Content-Security-Policy "frame-ancestors 'self' https://sites.google.com;";
        }
    }
}
